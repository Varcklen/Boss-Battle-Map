{
  "Id": 50332205,
  "Comment": "",
  "IsScript": true,
  "RunOnMapInit": false,
  "Script": "library Mods requires LibDataAbilities, SpellPower, RandomTargetLib, Money, Multiboard, Luck, NullingAbility, ModsData, ChallengeData, Repick\r\n    globals\r\n        real Event_Mode_Awake_Real = 0\r\n    endglobals\r\n    \r\n    private function EnableGoodMode takes integer index returns boolean\r\n        local integer abilityId = 0\r\n        \r\n        if udg_modgood[index] == false then\r\n            set udg_modgood[index] = true\r\n            set abilityId = udg_DB_GoodMod[index]\r\n            call IconFrame( \"ModGood\" + I2S(index), BlzGetAbilityIcon(abilityId), BlzGetAbilityTooltip(abilityId, 0), BlzGetAbilityExtendedTooltip(abilityId, 0) )\r\n            return true\r\n        else\r\n            return false\r\n        endif\r\n    endfunction\r\n    \r\n    private function EnableBadMode takes integer index returns boolean\r\n        local integer abilityId = 0\r\n        \r\n        if udg_modbad[index] == false then\r\n            set udg_modbad[index] = true\r\n            set abilityId = udg_DB_BadMod[index]\r\n            call IconFrame( \"ModBad\" + I2S(index), BlzGetAbilityIcon(abilityId), BlzGetAbilityTooltip(abilityId, 0), BlzGetAbilityExtendedTooltip(abilityId, 0) )\r\n            return true\r\n        else\r\n            return false\r\n        endif\r\n    endfunction\r\n    \r\n    private function ActivateGoodModes takes integer count returns nothing\r\n        local integer i\r\n        local integer rand\r\n        local ListInt modes = ListInt.create() \r\n        \r\n        set i = 1\r\n        loop\r\n            exitwhen i > udg_Database_NumberItems[7]\r\n            call modes.Add(i)\r\n            set i = i + 1\r\n        endloop\r\n        \r\n        if count > 0 then\r\n            set i = 1\r\n            loop\r\n                exitwhen i > count or modes.Size <= 0 \r\n                set rand = GetRandomInt( 1, modes.Size)\r\n                call EnableGoodMode(rand)\r\n                call modes.RemoveByIndex(rand)\r\n                set i = i + 1\r\n            endloop\r\n        endif\r\n        \r\n        call modes.destroy()\r\n    endfunction\r\n    \r\n    private function ActivateBadModes takes integer count returns nothing\r\n        local integer i\r\n        local integer rand\r\n        local ListInt modes = ListInt.create() \r\n        \r\n        set i = 1\r\n        loop\r\n            exitwhen i > udg_Database_NumberItems[22]\r\n            call modes.Add(i)\r\n            set i = i + 1\r\n        endloop\r\n        \r\n        if udg_worldmod[6] then\r\n            set count = udg_Database_NumberItems[22]\r\n        elseif udg_worldmod[7] then\r\n            set i = 1\r\n            loop\r\n                exitwhen i > ChallengeData_CURSES\r\n                set rand = Challenges[Chosen_Challenge][i]\r\n                call EnableBadMode(rand)\r\n                call modes.RemoveByIndex(rand)\r\n                set i = i + 1\r\n            endloop\r\n        endif\r\n        \r\n        if count > 0 then\r\n            set i = 1\r\n            loop\r\n                exitwhen i > count or modes.Size <= 0 \r\n                set rand = GetRandomInt( 1, modes.Size)\r\n                call EnableBadMode(rand)\r\n                call modes.RemoveByIndex(rand)\r\n                set i = i + 1\r\n            endloop\r\n        endif\r\n        \r\n        call modes.destroy()\r\n    endfunction\r\n    \r\n    private function RandomHero takes nothing returns nothing\r\n        local integer i\r\n        local player owner\r\n        local unit hero\r\n        local integer heroKey\r\n        \r\n        call IconFrame( \"New one\", BlzGetAbilityIcon('A0D2'), BlzGetAbilityTooltip('A0D2', 0), BlzGetAbilityExtendedTooltip('A0D2', 0) )\r\n\r\n        set i = 0\r\n        loop\r\n            exitwhen i > 3\r\n            set owner = Player(i)\r\n            if GetPlayerSlotState(owner) == PLAYER_SLOT_STATE_PLAYING then\r\n                call Repick(owner)\r\n\r\n                set hero = RandomHero_GetRandomHero( owner )\r\n                set heroKey = GetHeroNumber( GetUnitTypeId(hero) )\r\n                \r\n                set Event_HeroPicked_Hero = hero\r\n                set Event_HeroPicked_HeroKey = heroKey\r\n                set Event_HeroPicked_Player = owner\r\n                set Event_HeroPicked_Real = 0.00\r\n                set Event_HeroPicked_Real = 1.00\r\n                set Event_HeroPicked_Real = 0.00\r\n                \r\n                call moneyst( hero, 250 )\r\n            endif\r\n            set i = i + 1\r\n        endloop\r\n        \r\n        set owner = null\r\n        set hero = null\r\n    endfunction\r\n    \r\n    public function Awake takes nothing returns nothing\r\n        local integer cyclA = 1\r\n        local integer cyclAEnd\r\n        local integer cyclB\r\n        local integer cyclBEnd\r\n        local integer m = 0\r\n        local integer n = 0\r\n        local integer p = 0\r\n        local integer rand = 0\r\n        local integer g = 0\r\n        local boolean isActivated = false\r\n    \r\n        //Power Up\r\n        if udg_logic[6] then\r\n            set udg_logic[7] = true\r\n            call IconFrame( \"Power up\", BlzGetAbilityIcon('A09D'), BlzGetAbilityTooltip('A09D', 0), BlzGetAbilityExtendedTooltip('A09D', 0) )\r\n        endif\r\n        \r\n        //Hardcore\r\n        if udg_logic[100] then\r\n            set udg_logic[101] = true\r\n            call IconFrame( \"Hardcore\", BlzGetAbilityIcon('A15C'), BlzGetAbilityTooltip('A15C', 0), BlzGetAbilityExtendedTooltip('A15C', 0) )\r\n        endif\r\n    \r\n        //Random Hero\r\n        if udg_logic[77] then\r\n            call RandomHero()\r\n            call TriggerSleepAction( 0.01 )\r\n        endif\r\n        \r\n        //Bless & Curse\r\n        if udg_worldmod[0] then\r\n            set p = 0\r\n            set udg_logic[0] = true\r\n            call MultiSetColor( udg_multi, 3, 2, 80.00, 0.00, 0.00, 25.00 )\r\n            if udg_worldmod[1] then\r\n                call TriggerExecute( gg_trg_FastStart_Data )\r\n                call TriggerExecute( gg_trg_Fast_Start_Choose )\r\n                set p = 'A03K'\r\n            elseif udg_worldmod[2] then\r\n                set udg_logic[10] = true\r\n                set p = 'A0BK'\r\n            elseif udg_worldmod[3] then\r\n                set m = 1\r\n                set n = 1\r\n                set p = 'A0HK'\r\n            elseif udg_worldmod[4] then\r\n                set m = 2\r\n                set n = 2\r\n                set p = 'A0HL'\r\n            elseif udg_worldmod[5] then\r\n                set m = 4\r\n                set n = 4\r\n                set p = 'A0HM'\r\n            elseif udg_worldmod[6] then\r\n                set n = udg_Database_NumberItems[22]\r\n                set p = 'A1BM'\r\n            elseif udg_worldmod[7] then\r\n                set p = 'A0WT'\r\n            elseif udg_worldmod[8] then\r\n                set udg_logic[51] = true\r\n                set cyclA = 1\r\n                loop\r\n                    exitwhen cyclA > 4\r\n                    if GetPlayerSlotState(Player(cyclA-1)) == PLAYER_SLOT_STATE_PLAYING then\r\n                        set cyclB = 0\r\n                        loop\r\n                            exitwhen cyclB > 5\r\n                            call RemoveItem(UnitItemInSlot(udg_hero[cyclA], cyclB))\r\n                            if cyclB == 0 then\r\n                                call UnitAddItem( udg_hero[cyclA], CreateItem( 'I0FB', GetUnitX(udg_hero[cyclA]), GetUnitY(udg_hero[cyclA]) ) )\r\n                            else\r\n                                call UnitAddItem( udg_hero[cyclA], CreateItem( 'I0B5', GetUnitX(udg_hero[cyclA]), GetUnitY(udg_hero[cyclA]) ) )\r\n                            endif\r\n                            set cyclB = cyclB + 1\r\n                        endloop\r\n                    endif\r\n                    set cyclA = cyclA + 1\r\n                endloop\r\n                call ShowUnit(udg_UNIT_JULE, false)\r\n                set p = 'A1BX'\r\n            endif\r\n            if p != 0 then\r\n                call IconFrame( \"Mode\", BlzGetAbilityIcon(p), BlzGetAbilityTooltip(p, 0), BlzGetAbilityExtendedTooltip(p, 0) )\r\n            endif\r\n        endif\r\n\r\n        if AnyHasLvL(9) then\r\n            set m = m + 1\r\n            set n = n + 1\r\n        endif\r\n        \r\n        //Bless Choose\r\n        call ActivateGoodModes(m)\r\n        \r\n        //Curse Choose\r\n        call ActivateBadModes(n)\r\n\r\n        //Bless Activation\r\n        if m > 0 then\r\n            if udg_modgood[2] then\r\n                call RessurectionPoints( 1, true )\r\n            endif\r\n            if udg_modgood[3] then\r\n                set cyclA = 1\r\n                loop\r\n                    exitwhen cyclA > 4\r\n                    if GetPlayerSlotState(Player(cyclA - 1)) == PLAYER_SLOT_STATE_PLAYING then\r\n                        call ItemRandomizerAll( udg_hero[cyclA], 0 )\r\n                    endif\r\n                    set cyclA = cyclA + 1\r\n                endloop\r\n            endif\r\n            if udg_modgood[4] then\r\n                call EnableTrigger( gg_trg_Thirst )\r\n            endif\r\n            if udg_modgood[5] then\r\n                call EnableTrigger( gg_trg_Malice )\r\n            endif\r\n            if udg_modgood[8] then\r\n                call EnableTrigger( gg_trg_Magic )\r\n            endif\r\n            if udg_modgood[9] then\r\n                set cyclA = 1\r\n                loop\r\n                    exitwhen cyclA > 4\r\n                    if GetPlayerSlotState(Player(cyclA - 1)) == PLAYER_SLOT_STATE_PLAYING then\r\n                        call UnitAddAbility( udg_hero[cyclA], 'A0HQ' )\r\n                    endif\r\n                    set cyclA = cyclA + 1\r\n                endloop\r\n            endif\r\n            if udg_modgood[10] then\r\n                call EnableTrigger( gg_trg_Necropotion )\r\n            endif\r\n            if udg_modgood[13] then\r\n                set ExchangerUnit[0] = ReplaceUnitBJ( ExchangerUnit[0], 'h00R', bj_UNIT_STATE_METHOD_RELATIVE )\r\n                set ExchangerUnit[1] = ReplaceUnitBJ( ExchangerUnit[1], 'h00X', bj_UNIT_STATE_METHOD_RELATIVE )\r\n                set ExchangerUnit[2] = ReplaceUnitBJ( ExchangerUnit[2], 'h00Y', bj_UNIT_STATE_METHOD_RELATIVE )\r\n                set ExchangerUnit[3] = ReplaceUnitBJ( ExchangerUnit[3], 'h00W', bj_UNIT_STATE_METHOD_RELATIVE )\r\n            endif\r\n            if udg_modgood[14] then\r\n                call EnableTrigger( gg_trg_Hronospeed )\r\n            endif\r\n            if udg_modgood[15] then\r\n                call UnitAddAbility( udg_UNIT_DUMMY_BUFF, 'A0IT' )\r\n                set cyclA = 1\r\n                loop\r\n                    exitwhen cyclA > 4\r\n                    if GetPlayerSlotState(Player(cyclA - 1)) == PLAYER_SLOT_STATE_PLAYING then\r\n                        call spdst( udg_hero[cyclA], 10 )\r\n                    endif\r\n                    set cyclA = cyclA + 1\r\n                endloop\r\n            endif\r\n            if udg_modgood[17] then\r\n                call EnableTrigger( gg_trg_Reborn )\r\n            endif\r\n            if udg_modgood[18] then\r\n                set cyclA = 1\r\n                loop\r\n                    exitwhen cyclA > 4\r\n                    if GetPlayerSlotState(Player(cyclA - 1)) == PLAYER_SLOT_STATE_PLAYING then\r\n                        call luckyst( udg_hero[cyclA], 10 )\r\n                    endif\r\n                    set cyclA = cyclA + 1\r\n                endloop\r\n            endif\r\n            if udg_modgood[19] then\r\n                call SetRaritySpawn(udg_RarityChance[3] + 5, udg_RarityChance[2] + 10)\r\n            endif\r\n            if udg_modgood[28] then\r\n                set cyclA = 1\r\n                loop\r\n                    exitwhen cyclA > 4\r\n                    if GetPlayerSlotState(Player(cyclA - 1)) == PLAYER_SLOT_STATE_PLAYING then\r\n                        call SpellUniqueUnit(udg_hero[cyclA], 25)\r\n                        call SpellPotion(cyclA, 25)\r\n                    endif\r\n                    set cyclA = cyclA + 1\r\n                endloop\r\n            endif\r\n            if udg_modgood[29] then\r\n                set udg_Heroes_Chanse = udg_Heroes_Chanse + 1\r\n                call MultiSetValue( udg_multi, 2, 1, I2S( udg_Heroes_Chanse ) )\r\n            endif\r\n            if udg_modgood[30] then\r\n                set cyclA = 1\r\n                loop\r\n                    exitwhen cyclA > 4\r\n                    if GetPlayerSlotState(Player(cyclA - 1)) == PLAYER_SLOT_STATE_PLAYING then\r\n                    \tset udg_rollbase[cyclA] = udg_rollbase[cyclA] + 1\r\n                    endif\r\n                    set cyclA = cyclA + 1\r\n                endloop\r\n            endif\r\n            if udg_modgood[32] then \r\n                set cyclA = 1\r\n                loop\r\n                    exitwhen cyclA > 4\r\n                    if GetPlayerSlotState(Player(cyclA - 1)) == PLAYER_SLOT_STATE_PLAYING then\r\n                        call BlzSetUnitRealFieldBJ( udg_hero[cyclA], UNIT_RF_HIT_POINTS_REGENERATION_RATE, BlzGetUnitRealField(udg_hero[cyclA], UNIT_RF_HIT_POINTS_REGENERATION_RATE) + 0.50 )\r\n                        call BlzSetUnitRealFieldBJ( udg_hero[cyclA], UNIT_RF_MANA_REGENERATION, BlzGetUnitRealField(udg_hero[cyclA], UNIT_RF_MANA_REGENERATION) + 0.50 )\r\n                    endif\r\n                    set cyclA = cyclA + 1\r\n                endloop\r\n            endif\r\n        endif\r\n        \r\n        //Curse Activation\r\n        if n > 0 then\r\n            if udg_modbad[2] then\r\n                call UnitAddAbility( udg_UNIT_DUMMY_BUFF, 'A1DM' )\r\n            endif\r\n            if udg_modbad[3] then\r\n                call EnableTrigger( gg_trg_Grave )\r\n            endif\r\n            if udg_modbad[4] then\r\n                call EnableTrigger( gg_trg_Flame )\r\n            endif\r\n            if udg_modbad[10] then\r\n                call SpellPower_AddBossSpellPower(0.15)\r\n            endif\r\n            if udg_modbad[11] then\r\n            \tset udg_timelimit = udg_timelimit - 75\r\n            endif\r\n            if udg_modbad[15] then\r\n                call EnableTrigger( gg_trg_Scatter )\r\n            endif\r\n        endif\r\n        \r\n        set Event_Mode_Awake_Real = 0.00\r\n        set Event_Mode_Awake_Real = 1.00\r\n        set Event_Mode_Awake_Real = 0.00\r\n        \r\n        if udg_HardNum > 0 then\r\n            call EnableTrigger( gg_trg_HardModActive )\r\n            call SpellPower_AddBossSpellPower(udg_HardNum * 0.25)\r\n\r\n            set p = udg_DB_Hardest_On[udg_HardNum]\r\n            call IconFrame( \"HardMode\", BlzGetAbilityIcon(p), BlzGetAbilityTooltip(p, 0), BlzGetAbilityExtendedTooltip(p, 0) )\r\n            \r\n            /*set cyclA = 0\r\n            loop\r\n                exitwhen cyclA > 3\r\n                if GetPlayerSlotState( Player( cyclA ) ) == PLAYER_SLOT_STATE_PLAYING then\r\n                    call MMD_UpdateValueString(\"difficulty\", Player(cyclA), BlzGetAbilityTooltip(p, 0))\r\n                endif\r\n                set cyclA = cyclA + 1\r\n            endloop*/\r\n        endif\r\n    endfunction\r\nendlibrary\r\n",
  "Events": [],
  "LocalVariables": [],
  "Conditions": [],
  "Actions": []
}