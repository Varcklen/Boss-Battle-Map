{
  "Id": 50332082,
  "Comment": "",
  "IsScript": true,
  "RunOnMapInit": false,
  "Script": "library NullingAbility requires SpellPower, StatLib\r\n\r\n    function delspellpas takes unit caster returns nothing\r\n        local integer i = GetPlayerId( GetOwningPlayer( caster ) ) + 1\r\n        local integer lvl\r\n        local integer cyclA\r\n\r\n        call IssueImmediateOrderBJ( caster, \"unimmolation\" )\r\n        \r\n        //call MMD_LogEvent1(\"used_tome_of_oblivion_\" + I2S(i),GetUnitName(caster) )\r\n        \r\n        set udg_Event_NullingAbility_Unit = caster\r\n        \r\n        set udg_Event_NullingAbility_Real = 0.00\r\n        set udg_Event_NullingAbility_Real = 1.00\r\n        set udg_Event_NullingAbility_Real = 0.00\r\n\r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[6] then\r\n            call DestroyTimer( LoadTimerHandle( udg_hash, GetHandleId( caster ), StringHash( \"angelpas\" )))\r\n            call RemoveSavedBoolean(udg_hash, GetHandleId( caster ), StringHash( \"angelpas\" ) )\r\n            call RemoveSavedReal(udg_hash, GetHandleId( caster ), StringHash( \"angelpas\" ) )\r\n            call RemoveSavedHandle(udg_hash, GetHandleId( caster ), StringHash( \"angelpas\" ) )\r\n        endif\r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[59] then\r\n            call DestroyTimer( LoadTimerHandle( udg_hash, GetHandleId( caster ), StringHash( \"wgne\" )))\r\n        endif\r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[19] then\r\n            call DestroyTimer( LoadTimerHandle( udg_hash, GetHandleId( caster ), StringHash( \"hrne\" )))\r\n        endif\r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[60] then\r\n            call UnitRemoveAbility( caster, 'A0BS')\r\n        endif\r\n        \r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[20] then\r\n            call SpellPotion(i, -15*GetUnitAbilityLevel( caster, 'A0DC'))\r\n            call spdst(caster, -3*GetUnitAbilityLevel( caster, 'A0DC'))\r\n        endif\r\n        \r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[18] then\r\n            call DestroyTimer( LoadTimerHandle( udg_hash, GetHandleId( caster ), StringHash( \"snp\" )))\r\n            call RemoveSavedHandle( udg_hash, GetHandleId( caster ), StringHash( \"snp\" ) )\r\n            call UnitRemoveAbility( caster, 'A18P' )\r\n            call UnitRemoveAbility( caster, 'A18Q' ) \r\n            call UnitRemoveAbility( caster, 'A18R' ) \r\n            call UnitRemoveAbility( caster, 'B031' ) \r\n        endif\r\n        \r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[25] then\r\n            call RemoveSavedHandle(udg_hash, GetHandleId( caster ), StringHash( \"bkp\" ) )\r\n            call DestroyTimer( LoadTimerHandle( udg_hash, GetHandleId( caster ), StringHash( \"bkp\" )))\r\n            call UnitRemoveAbility( caster, 'A0ZY' )\r\n            call UnitRemoveAbility( caster, 'A0ZZ' )\r\n            call UnitRemoveAbility( caster, 'S005' )\r\n            call UnitRemoveAbility( caster, 'A09O' )\r\n            call UnitRemoveAbility( caster, 'B048' )\r\n            call UnitRemoveAbility( caster, 'B049' ) \r\n        endif\r\n        \r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[51] then\r\n            call UnitRemoveAbility( caster, 'A17X' )\r\n        endif\r\n        \r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[5] then\r\n            call RemoveSavedHandle( udg_hash, 1, StringHash( \"sklp\" ) )\r\n        endif\r\n        \r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[67] then\r\n            if GetUnitAbilityLevel( caster, 'A0LD') >= 1 then\r\n                call BlzSetUnitMaxHP( caster, BlzGetUnitMaxHP(caster) - 50 )\r\n            endif\r\n            call BlzSetUnitMaxHP( caster, BlzGetUnitMaxHP(caster) - (30*GetUnitAbilityLevel( caster, 'A0LD')) )\r\n        endif\r\n\r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[26] then\r\n            call DestroyTimer( LoadTimerHandle( udg_hash, GetHandleId( caster ), StringHash( \"sdap\" ) ) )\r\n            call RemoveSavedHandle( udg_hash, GetHandleId( caster ), StringHash( \"sdap\" ) )\r\n        endif\r\n\r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[7] then\r\n            call UnitRemoveAbility( caster, 'A008' )\r\n            call DestroyTimer( LoadTimerHandle( udg_hash, GetHandleId( caster ), StringHash( \"brnp\" )))\r\n            call RemoveSavedInteger(udg_hash, GetHandleId( caster ), StringHash( \"brnplvl\" ) )\r\n            call RemoveSavedHandle(udg_hash, GetHandleId( caster ), StringHash( \"brnp\" ) )\r\n        endif\r\n\r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[77] then\r\n            call UnitRemoveAbilityBJ( 'A1DP', caster )\r\n        endif\r\n        \r\n        // Runesmith Rock Spawn reset\r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[78] then\r\n            call DestroyTimer( LoadTimerHandle( udg_hash, GetHandleId( caster ), StringHash( \"runesmith_rocks\" ) ) )\r\n            call RemoveSavedHandle(udg_hash, GetHandleId( caster ), StringHash( \"runesmith_rocks\" ) )\r\n            call FlushChildHashtable( udg_hash, StringHash( \"runesmith_rocks_source\" ) )\r\n        endif\r\n\r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[39] then\r\n            call spdst( caster, -1*LoadReal( udg_hash, GetHandleId( caster ), StringHash( \"mtmqpn\" ) ) )\r\n            call SaveReal( udg_hash, GetHandleId( caster ), StringHash( \"mtmqpn\" ), 0 )\r\n            call DestroyTimer( LoadTimerHandle( udg_hash, GetHandleId( caster ), StringHash( \"mtmqp\" ) ) )\r\n        endif\r\n        \r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[66] then\r\n            call spdst( caster, -1*LoadReal( udg_hash, GetHandleId( caster ), StringHash( \"prse\" ) ) )\r\n            call SaveReal( udg_hash, GetHandleId( caster ), StringHash( \"prse\" ), 0 )\r\n            call DestroyTimer( LoadTimerHandle( udg_hash, GetHandleId( caster ), StringHash( \"prse\" ) ) )\r\n        endif\r\n\r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[41] then\r\n            call UnitRemoveAbility( caster, 'A0RW')\r\n            call UnitRemoveAbility( caster, 'A0S6')\r\n            call UnitRemoveAbility( caster, 'A0SD')\r\n            call SetPlayerTechResearchedSwap( 'R004', 0, GetOwningPlayer(caster) )\r\n        endif\r\n\r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[58] then\r\n            set cyclA = 1\r\n            loop\r\n                exitwhen cyclA > 5\r\n                call BlzSetAbilityIcon( 'A122', BlzGetAbilityStringField(BlzGetUnitAbility(caster, 'A122'), ABILITY_SF_ICON_RESEARCH) )\r\n                call BlzSetAbilityExtendedTooltip( 'A122', DestroyerTool[1][cyclA], cyclA-1 )\r\n                call BlzSetAbilityIntegerLevelFieldBJ( BlzGetUnitAbility(caster, 'A122'), ABILITY_ILF_MANA_COST, cyclA-1, DestroyerMana[1][cyclA] )\r\n                \r\n                call BlzSetAbilityIcon( 'A129', BlzGetAbilityStringField(BlzGetUnitAbility(caster, 'A129'), ABILITY_SF_ICON_RESEARCH) )\r\n                call BlzSetAbilityExtendedTooltip( 'A129', DestroyerTool[2][cyclA], cyclA-1 )\r\n                call BlzSetAbilityIntegerLevelFieldBJ( BlzGetUnitAbility(caster, 'A129'), ABILITY_ILF_MANA_COST, cyclA-1, DestroyerMana[2][cyclA] )\r\n                \r\n                call BlzSetAbilityIcon( 'A12B', BlzGetAbilityStringField(BlzGetUnitAbility(caster, 'A12B'), ABILITY_SF_ICON_RESEARCH) )\r\n                call BlzSetAbilityExtendedTooltip( 'A12B', DestroyerTool[3][cyclA], cyclA-1 )\r\n                call BlzSetAbilityIntegerLevelFieldBJ( BlzGetUnitAbility(caster, 'A12B'), ABILITY_ILF_MANA_COST, cyclA-1, DestroyerMana[3][cyclA] )\r\n                set cyclA = cyclA + 1\r\n            endloop\r\n        endif\r\n        if GetUnitTypeId( caster ) == udg_Database_Hero[69] then\r\n            call UnitRemoveAbility( caster, 'A1A6')\r\n            call UnitRemoveAbility( caster, 'A1A7')\r\n            call RemoveSavedReal( udg_hash, GetHandleId( caster ), StringHash( \"infe\" ) )\r\n            call RemoveSavedReal( udg_hash, GetHandleId( caster ), StringHash( \"infen\" ) )\r\n        endif\r\n        \r\n        set caster = null\r\n    endfunction \r\n    \r\nendlibrary",
  "Events": [],
  "LocalVariables": [],
  "Conditions": [],
  "Actions": []
}