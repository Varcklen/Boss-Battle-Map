{
  "Id": 50332329,
  "Comment": "",
  "IsScript": true,
  "RunOnMapInit": false,
  "Script": "library ForgeSpecFone requires SpecialLib //ResourceLib, ChangeDiscriptionLib, \r\n\r\nglobals\r\n\tframehandle array bgfrgfons\r\n\tframehandle array forgeicons\r\n\tframehandle array forgenames\r\n\tframehandle array forgetools\r\n\tframehandle array forgebutschss\r\n    framehandle array forgealticons\r\n\tframehandle array forgealtnames\r\n\tframehandle forgebuts\r\n\tframehandle frgviss\r\nendglobals\r\n\r\nfunction ButtonFSpell takes nothing returns nothing\r\n\tif GetTriggerPlayer() == GetLocalPlayer() then\r\n        if not(BlzFrameIsVisible(bgfrgfons[1])) then\r\n            call BlzFrameSetText(forgebuts, \"Hide\")\r\n            call BlzFrameSetVisible(bgfrgfons[1], true)\r\n            call BlzFrameSetVisible(bgfrgfons[2], true)\r\n            call BlzFrameSetVisible(bgfrgfons[3], true)\r\n        else\r\n            call BlzFrameSetText(forgebuts, \"Show\")\r\n            call BlzFrameSetVisible(bgfrgfons[1], false)\r\n            call BlzFrameSetVisible(bgfrgfons[2], false)\r\n            call BlzFrameSetVisible(bgfrgfons[3], false)\r\n        endif\r\n\tendif\r\nendfunction\r\n\r\nfunction ChangeAbility takes unit u, integer ab returns nothing\r\n    local player p = GetOwningPlayer(u)\r\n    local integer i = GetPlayerId(p)+1\r\n    local integer cyclA\r\n    \r\n    call NewSpecial( u, ab )\r\n    \r\n    set p = null\r\n    set u = null\r\nendfunction\r\n\r\nfunction Button1S takes nothing returns nothing\r\n\tlocal integer k = GetPlayerId(GetTriggerPlayer())\r\n\tlocal integer i = k + 1\r\n\tlocal integer j = k*3\r\n\tlocal integer m = GetItemTypeId(udg_forgelose[i])\r\n\tlocal integer id = GetHandleId(udg_forgelose[i])\r\n    local integer ab = LoadInteger( udg_hash, id, StringHash( \"frg1\" ) )\r\n\r\n    if GetUnitState( udg_hero[i], UNIT_STATE_LIFE ) > 0.405 then \r\n        if UnitHasItem(udg_hero[i], udg_forgelose[i]) then\r\n            call DestroyEffect( AddSpecialEffect( \"Objects\\\\Spawnmodels\\\\NightElf\\\\NECancelDeath\\\\NECancelDeath.mdl\", GetUnitX( udg_hero[i] ), GetUnitY( udg_hero[i] ) ) )\r\n            if udg_forgelose[i] != null then\r\n                call RemoveItem( udg_forgelose[i] )\r\n                set udg_forgelose[i] = null\r\n            endif\r\n            call ChangeAbility(udg_hero[i], ab)\r\n        endif\r\n        if GetTriggerPlayer() == GetLocalPlayer() then\r\n            call BlzFrameSetVisible(bgfrgfons[1], false)\r\n            call BlzFrameSetVisible(bgfrgfons[2], false)\r\n            call BlzFrameSetVisible(bgfrgfons[3], false)\r\n            call BlzFrameSetVisible(forgebuts, false)\r\n        endif\r\n        \r\n        call SaveInteger( udg_hash, id, StringHash( \"frg1\" ), 0 )\r\n        call SaveInteger( udg_hash, id, StringHash( \"frg2\" ), 0 )\r\n        call SaveInteger( udg_hash, id, StringHash( \"frg3\" ), 0 )\r\n    endif\r\nendfunction\r\n\r\nfunction Button2S takes nothing returns nothing\r\n\tlocal integer k = GetPlayerId(GetTriggerPlayer())\r\n\tlocal integer i = k + 1\r\n\tlocal integer j = k*3\r\n\tlocal integer m = GetItemTypeId(udg_forgelose[i])\r\n    local integer id = GetHandleId(udg_forgelose[i])\r\n    local integer ab = LoadInteger( udg_hash, id, StringHash( \"frg2\" ) )\r\n\t\r\n    if GetUnitState( udg_hero[i], UNIT_STATE_LIFE ) > 0.405 then \r\n        if UnitHasItem(udg_hero[i], udg_forgelose[i]) then\r\n            call DestroyEffect( AddSpecialEffect( \"Objects\\\\Spawnmodels\\\\NightElf\\\\NECancelDeath\\\\NECancelDeath.mdl\", GetUnitX( udg_hero[i] ), GetUnitY( udg_hero[i] ) ) )\r\n            if udg_forgelose[i] != null then\r\n                call RemoveItem( udg_forgelose[i] )\r\n                set udg_forgelose[i] = null\r\n            endif\r\n            call ChangeAbility(udg_hero[i], ab)\r\n        endif\r\n        if GetTriggerPlayer() == GetLocalPlayer() then\r\n            call BlzFrameSetVisible(bgfrgfons[1], false)\r\n            call BlzFrameSetVisible(bgfrgfons[2], false)\r\n            call BlzFrameSetVisible(bgfrgfons[3], false)\r\n            call BlzFrameSetVisible(forgebuts, false)\r\n        endif\r\n        \r\n        call SaveInteger( udg_hash, id, StringHash( \"frg1\" ), 0 )\r\n        call SaveInteger( udg_hash, id, StringHash( \"frg2\" ), 0 )\r\n        call SaveInteger( udg_hash, id, StringHash( \"frg3\" ), 0 )\r\n    endif\r\nendfunction\r\n\r\nfunction Button3S takes nothing returns nothing\r\n\tlocal integer k = GetPlayerId(GetTriggerPlayer())\r\n\tlocal integer i = k + 1\r\n\tlocal integer j = k*3\r\n\tlocal integer m = GetItemTypeId(udg_forgelose[i])\r\n    local integer id = GetHandleId(udg_forgelose[i])\r\n    local integer ab = LoadInteger( udg_hash, id, StringHash( \"frg3\" ) )\r\n\t\r\n    if GetUnitState( udg_hero[i], UNIT_STATE_LIFE ) > 0.405 then \r\n        if UnitHasItem(udg_hero[i], udg_forgelose[i]) then\r\n            call DestroyEffect( AddSpecialEffect( \"Objects\\\\Spawnmodels\\\\NightElf\\\\NECancelDeath\\\\NECancelDeath.mdl\", GetUnitX( udg_hero[i] ), GetUnitY( udg_hero[i] ) ) )\r\n            if udg_forgelose[i] != null then\r\n                call RemoveItem( udg_forgelose[i] )\r\n                set udg_forgelose[i] = null\r\n            endif\r\n            call ChangeAbility(udg_hero[i], ab)\r\n        endif\r\n        if GetTriggerPlayer() == GetLocalPlayer() then\r\n            call BlzFrameSetVisible(bgfrgfons[1], false)\r\n            call BlzFrameSetVisible(bgfrgfons[2], false)\r\n            call BlzFrameSetVisible(bgfrgfons[3], false)\r\n            call BlzFrameSetVisible(forgebuts, false)\r\n        endif\r\n        \r\n        call SaveInteger( udg_hash, id, StringHash( \"frg1\" ), 0 )\r\n        call SaveInteger( udg_hash, id, StringHash( \"frg2\" ), 0 )\r\n        call SaveInteger( udg_hash, id, StringHash( \"frg3\" ), 0 )\r\n    endif\r\nendfunction\r\n\r\nendlibrary",
  "Events": [],
  "LocalVariables": [],
  "Conditions": [],
  "Actions": []
}