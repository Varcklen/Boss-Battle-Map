{
  "Id": 50332340,
  "Comment": "",
  "IsScript": true,
  "RunOnMapInit": false,
  "Script": "globals\r\n\tframehandle modesbut\r\n    framehandle modesback\r\n    framehandle modesdificon\r\n    framehandle modesdiftool\r\n    framehandle array modesextraicon\r\n    framehandle array modesextrabut\r\n    framehandle array modesmodeicon[4][3]\r\n    framehandle array modesmodebut[4][3]\r\n    framehandle array modesroticon[4][3]\r\n    framehandle array modesrotebut[4][3]\r\n    framehandle array modesDescription[4][3]\r\n    framehandle modebase\r\n    framehandle rotbase\r\n    framehandle modeshostname\r\n    framehandle modeslight\r\n    integer modeslightnum = 100\r\n    integer modeslightmove = -6\r\n    boolean modeslightbool = false\r\nendglobals\r\n\r\nfunction ButtonModes takes nothing returns nothing\r\n    if udg_Host == GetTriggerPlayer() then\r\n        set modeslightbool = true\r\n    endif\r\n    if GetLocalPlayer() == GetTriggerPlayer() then\r\n        call BlzFrameSetVisible( BlzGetTriggerFrame(),false)\r\n\t\tcall BlzFrameSetVisible( BlzGetTriggerFrame(),true)\r\n\t\tif BlzFrameIsVisible( modesback ) then\r\n\t\t\tcall BlzFrameSetVisible(modesback, false)\r\n\t\telse\r\n\t\t\tcall BlzFrameSetVisible(modesback, true)\r\n\t\tendif\r\n\tendif\r\nendfunction\r\n\r\nfunction DifficultyEnd takes nothing returns nothing\r\n    local integer id = GetHandleId( GetExpiredTimer( ) )\r\n    local string str = LoadStr( udg_hash, id, StringHash( \"diff\" ) )\r\n    \r\n    if not(udg_fightmod[0] ) then\r\n        call DisplayTimedTextToForce( bj_FORCE_ALL_PLAYERS, 5, \"Amplifier |cffffcc00\\\"\" + str + \"\\\"|r is activated.\" )\r\n    endif\r\n    call FlushChildHashtable( udg_hash, id )\r\nendfunction\r\n\r\nfunction DifficultyMore takes nothing returns nothing\r\n    local integer i = udg_HardNum + 1\r\n    local integer id\r\n    if GetLocalPlayer() == GetTriggerPlayer() then\r\n        call BlzFrameSetVisible( BlzGetTriggerFrame(),false)\r\n\t\tcall BlzFrameSetVisible( BlzGetTriggerFrame(),true)\r\n\tendif\r\n    \r\n    if udg_Host == GetTriggerPlayer() then\r\n        if i > 9 then\r\n            set i = 9\r\n        endif\r\n        \r\n        if i != udg_HardNum then\r\n            set udg_HardNum = i\r\n            set udg_Hardest = udg_DB_Hardest[i]\r\n            call MultiSetValue( udg_multi, 3, 2, udg_Hardest )\r\n            \r\n            call BlzFrameSetTexture( modesdificon, BlzGetAbilityIcon( udg_DB_ModesFrame_Difficulty[i]), 0, true )\r\n            call BlzFrameSetText( modesdiftool, BlzGetAbilityExtendedTooltip(udg_DB_ModesFrame_Difficulty[i], 0) )\r\n            \r\n            if udg_Heroes_Amount > 1 then\r\n                set id = GetHandleId( GetTriggerPlayer() )\r\n                if LoadTimerHandle( udg_hash, id, StringHash( \"diff\" ) ) == null  then\r\n                    call SaveTimerHandle( udg_hash, id, StringHash( \"diff\" ), CreateTimer() )\r\n                endif\r\n                set id = GetHandleId( LoadTimerHandle(udg_hash, id, StringHash( \"diff\" ) ) )\r\n                call SaveStr( udg_hash, id, StringHash( \"diff\" ), udg_Hardest )\r\n                call TimerStart( LoadTimerHandle( udg_hash, GetHandleId( GetTriggerPlayer() ), StringHash( \"diff\" ) ), 2, false, function DifficultyEnd )\r\n            endif\r\n        endif\r\n    endif\r\nendfunction\r\n\r\nfunction DifficultyLess takes nothing returns nothing\r\n    local integer i = udg_HardNum - 1\r\n    local integer id\r\n\r\n    if GetLocalPlayer() == GetTriggerPlayer() then\r\n        call BlzFrameSetVisible( BlzGetTriggerFrame(),false)\r\n\t\tcall BlzFrameSetVisible( BlzGetTriggerFrame(),true)\r\n\tendif\r\n    \r\n    if udg_Host == GetTriggerPlayer() then\r\n        if i < 0 then\r\n            set i = 0\r\n        endif\r\n\r\n        if i != udg_HardNum then\r\n            set udg_HardNum = i\r\n            set udg_Hardest = udg_DB_Hardest[i]\r\n            call MultiSetValue( udg_multi, 3, 2, udg_Hardest )\r\n            \r\n            call BlzFrameSetTexture( modesdificon, BlzGetAbilityIcon( udg_DB_ModesFrame_Difficulty[i]), 0, true )\r\n            call BlzFrameSetText( modesdiftool, BlzGetAbilityExtendedTooltip(udg_DB_ModesFrame_Difficulty[i], 0) )\r\n            \r\n            if udg_Heroes_Amount > 1 then\r\n                set id = GetHandleId( GetTriggerPlayer() )\r\n                if LoadTimerHandle( udg_hash, id, StringHash( \"diff\" ) ) == null  then\r\n                    call SaveTimerHandle( udg_hash, id, StringHash( \"diff\" ), CreateTimer() )\r\n                endif\r\n                set id = GetHandleId( LoadTimerHandle(udg_hash, id, StringHash( \"diff\" ) ) )\r\n                call SaveStr( udg_hash, id, StringHash( \"diff\" ), udg_Hardest )\r\n                call TimerStart( LoadTimerHandle( udg_hash, GetHandleId( GetTriggerPlayer() ), StringHash( \"diff\" ) ), 2, false, function DifficultyEnd )\r\n            endif\r\n        endif\r\n    endif\r\nendfunction\r\n\r\nfunction ExtraModeUse takes nothing returns nothing\r\n    local player p = GetTriggerPlayer()\r\n    \r\n    if GetLocalPlayer() == p then\r\n        call BlzFrameSetVisible( BlzGetTriggerFrame(),false)\r\n\t\tcall BlzFrameSetVisible( BlzGetTriggerFrame(),true)\r\n\tendif\r\n    \r\n    if udg_Host == p then\r\n        if modesextrabut[1] == BlzGetTriggerFrame() then\r\n            if not(udg_logic[100]) then\r\n                set udg_logic[100] = true\r\n                call DisplayTimedTextToForce( bj_FORCE_ALL_PLAYERS, 5.00, \"|cffffcc00'Hardcore'|r activated.\" )\r\n                call BlzFrameSetTexture( modesextraicon[1], \"ReplaceableTextures\\\\CommandButtons\\\\BTNCancel.blp\", 0, true )\r\n            else\r\n                set udg_logic[100] = false\r\n                call DisplayTimedTextToForce( bj_FORCE_ALL_PLAYERS, 5.00, \"|cffffcc00'Hardcore'|r disabled.\" )\r\n                call BlzFrameSetTexture( modesextraicon[1], BlzGetAbilityIcon( udg_DB_ModesFrame_Ability[1]), 0, true )\r\n            endif\r\n        elseif modesextrabut[2] == BlzGetTriggerFrame() then\r\n            if not(udg_logic[77]) then\r\n                set udg_logic[77] = true\r\n                call DisplayTimedTextToForce( bj_FORCE_ALL_PLAYERS, 5.00, \"|cffffcc00'On a new one!'|r activated.\" )\r\n                call BlzFrameSetTexture( modesextraicon[2], \"ReplaceableTextures\\\\CommandButtons\\\\BTNCancel.blp\", 0, true )\r\n            else\r\n                set udg_logic[77] = false\r\n                call DisplayTimedTextToForce( bj_FORCE_ALL_PLAYERS, 5.00, \"|cffffcc00'On a new one!'|r disabled.\" )\r\n                call BlzFrameSetTexture( modesextraicon[2], BlzGetAbilityIcon( udg_DB_ModesFrame_Ability[2]), 0, true )\r\n            endif\r\n        elseif modesextrabut[3] == BlzGetTriggerFrame() then\r\n            if not(udg_logic[78]) then\r\n                set udg_logic[78] = true\r\n                call DisplayTimedTextToForce( bj_FORCE_ALL_PLAYERS, 5.00, \"|cffffcc00'Double trouble'|r activated.\" )\r\n                call BlzFrameSetTexture( modesextraicon[3], \"ReplaceableTextures\\\\CommandButtons\\\\BTNCancel.blp\", 0, true )\r\n            else\r\n                set udg_logic[78] = false\r\n                call DisplayTimedTextToForce( bj_FORCE_ALL_PLAYERS, 5.00, \"|cffffcc00'Double trouble'|r disabled.\" )\r\n                call BlzFrameSetTexture( modesextraicon[3], BlzGetAbilityIcon( udg_DB_ModesFrame_Ability[3]), 0, true )\r\n            endif\r\n        elseif modesextrabut[4] == BlzGetTriggerFrame() then\r\n            if not(udg_logic[6]) then\r\n                set udg_logic[6] = true\r\n                call DisplayTimedTextToForce( bj_FORCE_ALL_PLAYERS, 5.00, \"|cffffcc00'Power up!'|r activated.\" )\r\n                call BlzFrameSetTexture( modesextraicon[4], \"ReplaceableTextures\\\\CommandButtons\\\\BTNCancel.blp\", 0, true )\r\n            else\r\n                set udg_logic[6] = false\r\n                call DisplayTimedTextToForce( bj_FORCE_ALL_PLAYERS, 5.00, \"|cffffcc00'Power up!'|r disabled.\" )\r\n                call BlzFrameSetTexture( modesextraicon[4], BlzGetAbilityIcon( udg_DB_ModesFrame_Ability[4]), 0, true )\r\n            endif\r\n        elseif modesextrabut[5] == BlzGetTriggerFrame() then\r\n            if GetOwningPlayer(udg_UNIT_CUTE_BOB) != Player(0) then\r\n                call SetUnitOwner( udg_UNIT_CUTE_BOB, Player(0), true )\r\n                call UnitRemoveAbility(udg_UNIT_CUTE_BOB, 'Ane2')\r\n                call DisplayTimedTextToForce( bj_FORCE_ALL_PLAYERS, 5.00, \"|cffffcc00'Host mode'|r activated.\" )\r\n                call BlzFrameSetTexture( modesextraicon[5], \"ReplaceableTextures\\\\CommandButtons\\\\BTNCancel.blp\", 0, true )\r\n            else\r\n                call SetUnitOwner( udg_UNIT_CUTE_BOB, Player(PLAYER_NEUTRAL_PASSIVE), true )\r\n                call SetUnitColor( udg_UNIT_CUTE_BOB, PLAYER_COLOR_PINK )\r\n                call UnitAddAbility(udg_UNIT_CUTE_BOB, 'Ane2')\r\n                call DisplayTimedTextToForce( bj_FORCE_ALL_PLAYERS, 5.00, \"|cffffcc00'Host mode'|r disabled.\" )\r\n                call BlzFrameSetTexture( modesextraicon[5], BlzGetAbilityIcon( udg_DB_ModesFrame_Ability[5]), 0, true )\r\n            endif\r\n        endif\r\n    endif\r\n    \r\n    set p = null\r\nendfunction\r\n\r\nfunction SetModeUse takes integer modeIndex, string modeName, integer x, integer y returns nothing\r\n    if not( udg_worldmod[modeIndex] ) then\r\n        set udg_worldmod[modeIndex] = true\r\n        set IsModeUsed = true\r\n        set udg_ModName = modeName\r\n        call DisplayTimedTextToForce( bj_FORCE_ALL_PLAYERS, 5, \"Mode |cffffcc00'\"+udg_ModName+\"'|r activated.\" )\r\n        call BlzFrameSetTexture( modesmodeicon[x][y], \"ReplaceableTextures\\\\CommandButtons\\\\BTNCancel.blp\", 0, true )\r\n    else\r\n        call DisplayTimedTextToForce( bj_FORCE_ALL_PLAYERS, 5, \"Mode |cffffcc00'\"+udg_ModName+\"'|r disabled.\" )\r\n        set udg_ModName = \"\"\r\n        set udg_worldmod[modeIndex] = false\r\n    endif\r\nendfunction\r\n\r\nglobals\r\n    boolean IsModeUsed = false\r\nendglobals\r\n\r\nfunction ModsModeUse takes nothing returns nothing\r\n    local player p = GetTriggerPlayer()\r\n    local integer cyclA = 0\r\n    local integer cyclB\r\n    local integer i = 0\r\n    \r\n    if GetLocalPlayer() == GetTriggerPlayer() then\r\n        call BlzFrameSetVisible( BlzGetTriggerFrame(),false)\r\n\t\tcall BlzFrameSetVisible( BlzGetTriggerFrame(),true)\r\n\tendif\r\n    \r\n    set IsModeUsed = false\r\n    \r\n    if udg_Host == p then\r\n        set cyclA = 1\r\n        loop\r\n            exitwhen cyclA > udg_DB_ModesFrame_ModeLR\r\n            set cyclB = 1\r\n            loop\r\n                exitwhen cyclB > udg_DB_ModesFrame_ModeUD\r\n                call BlzFrameSetTexture( modesmodeicon[cyclA][cyclB], BlzGetAbilityIcon( DB_ModesFrame_Mode[cyclA][cyclB]), 0, true )\r\n                set cyclB = cyclB + 1\r\n            endloop\r\n            set cyclA = cyclA + 1\r\n        endloop\r\n        \r\n        if modesmodebut[1][1] == BlzGetTriggerFrame() then\r\n            set i = 1\r\n            call SetModeUse(i, \"Fast start\", 1, 1)\r\n        elseif modesmodebut[2][1] == BlzGetTriggerFrame() then\r\n            set i = 2\r\n            call SetModeUse(i, \"Apocalypse of Random\", 2, 1)\r\n        elseif modesmodebut[3][1] == BlzGetTriggerFrame() then\r\n            set i = 7\r\n            call SetModeUse(i, \"Themed Challenge\", 3, 1)\r\n        elseif modesmodebut[4][1] == BlzGetTriggerFrame() then\r\n            set i = 6\r\n            call SetModeUse(i, \"Damned\", 4, 1)\r\n        elseif modesmodebut[1][2] == BlzGetTriggerFrame() then\r\n            set i = 3\r\n            call SetModeUse(i, \"Chaos\", 1, 2)\r\n        elseif modesmodebut[2][2] == BlzGetTriggerFrame() then\r\n            set i = 4\r\n            call SetModeUse(i, \"More chaos!\", 2, 2)\r\n        elseif modesmodebut[3][2] == BlzGetTriggerFrame() then\r\n            set i = 5\r\n            call SetModeUse(i, \"More! More chaos!\", 3, 2)\r\n        elseif modesmodebut[4][2] == BlzGetTriggerFrame() then\r\n            set i = 8\r\n            call SetModeUse(i, \"Dragons and Dungeons\", 4, 2)\r\n        endif\r\n        \r\n        if IsModeUsed then\r\n            set udg_worldmod[0] = true\r\n        else\r\n            set udg_worldmod[0] = false\r\n        endif\r\n        set cyclA = 1\r\n        loop\r\n            exitwhen cyclA > 8\r\n            if i != cyclA then\r\n                set udg_worldmod[cyclA] = false\r\n            endif\r\n            set cyclA = cyclA + 1\r\n        endloop\r\n    endif\r\n    \r\n    set p = null\r\nendfunction\r\n\r\nfunction RotationModeUse takes nothing returns nothing\r\n    local player p = GetTriggerPlayer()\r\n    local integer cyclA = 0\r\n    local integer cyclB\r\n    local boolean l = false\r\n    local integer i = 0\r\n    local integer k = 0\r\n    \r\n    if GetLocalPlayer() == p then\r\n        call BlzFrameSetVisible( BlzGetTriggerFrame(),false)\r\n\t\tcall BlzFrameSetVisible( BlzGetTriggerFrame(),true)\r\n\tendif\r\n    \r\n    if udg_Host == p then\r\n        set i = 0\r\n        set cyclA = 1\r\n        loop\r\n            exitwhen cyclA > udg_DB_ModesFrame_RotationUD\r\n            set cyclB = 1\r\n            loop\r\n                exitwhen cyclB > udg_DB_ModesFrame_RotationLR\r\n                set i = i + 1\r\n                if modesroticon[cyclB][cyclA] != null then\r\n                    call BlzFrameSetTexture( modesroticon[cyclB][cyclA], BlzGetAbilityIcon( DB_ModesFrame_Rotation[cyclB][cyclA]), 0, true )\r\n                endif\r\n                if modesrotebut[cyclB][cyclA] == BlzGetTriggerFrame() then\r\n                    set k = i\r\n                    if not(udg_Preset[i]) then\r\n                        set udg_Preset[i] = true\r\n                        set udg_Dublicate = true\r\n                        set l = true \r\n                        call DisplayTimedTextToForce( udg_Players, 5, \"|cffffcc00Rotation activated:|r \" + BlzGetAbilityTooltip(DB_ModesFrame_Rotation[cyclB][cyclA], 0) )\r\n                        call BlzFrameSetTexture( modesroticon[cyclB][cyclA], \"ReplaceableTextures\\\\CommandButtons\\\\BTNCancel.blp\", 0, true )\r\n                    else\r\n                        set udg_Preset[i] = false\r\n                        call DisplayTimedTextToForce( bj_FORCE_ALL_PLAYERS, 5, \"Rotation |cffffcc00'\" + BlzGetAbilityTooltip(DB_ModesFrame_Rotation[cyclB][cyclA], 0) + \"'|r disabled.\" )\r\n                    endif\r\n                endif\r\n                set cyclB = cyclB + 1\r\n            endloop\r\n            set cyclA = cyclA + 1\r\n        endloop\r\n        \r\n        if l then\r\n            set udg_Preset[0] = true\r\n        else\r\n            set udg_Preset[0] = false\r\n            set udg_Dublicate = false\r\n        endif\r\n        set cyclA = 1\r\n        loop\r\n            exitwhen cyclA > udg_DB_ModesFrame_RotationNum\r\n            if k != cyclA then\r\n                set udg_Preset[cyclA] = false\r\n            endif\r\n            set cyclA = cyclA + 1\r\n        endloop\r\n    endif\r\n    \r\n    set p = null\r\nendfunction\r\n\r\nfunction FrameModeLight takes nothing returns nothing\r\n    set modeslightnum = modeslightnum + modeslightmove\r\n\r\n    call BlzFrameSetAlpha(modeslight, modeslightnum)\r\n    if udg_fightmod[0] or modeslightbool then\r\n        call BlzFrameSetVisible( modeslight, false )\r\n        call DestroyTimer( GetExpiredTimer() )\r\n    elseif modeslightnum <= 20 then\r\n        set modeslightmove = 6\r\n    elseif modeslightnum >= 200 then\r\n        set modeslightmove = -6\r\n    endif\r\nendfunction\r\n\r\nfunction Trig_ModesFrame_Actions takes nothing returns nothing\r\n    local trigger trig\r\n    local real x = 1\r\n    local real y = 1\r\n    local framehandle framebase\r\n    local framehandle frame\r\n    local integer cyclA\r\n    local integer cyclB\r\n\r\n    set modesbut = BlzCreateFrame(\"ScriptDialogButton\", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI,0), 0,0) \r\n\r\n\tcall BlzFrameSetSize(modesbut, 0.08,0.03)\r\n\tcall BlzFrameSetAbsPoint(modesbut, FRAMEPOINT_CENTER, 0.55, 0.154)\r\n\tcall BlzFrameSetText(modesbut, \"Mods\")\r\n    call BlzFrameSetVisible( modesbut, false )\r\n\t\r\n    set trig = CreateTrigger()\r\n\tcall BlzTriggerRegisterFrameEvent(trig, modesbut, FRAMEEVENT_CONTROL_CLICK)\r\n\tcall TriggerAddAction(trig, function ButtonModes)\r\n    \r\n    set modeslight = BlzCreateFrameByType(\"BACKDROP\", \"\",BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI,0), \"StandartFrameTemplate\", 0)\r\n\tcall BlzFrameSetSize( modeslight, 0.12, 0.12 )\r\n\tcall BlzFrameSetPoint(modeslight, FRAMEPOINT_CENTER, modesbut, FRAMEPOINT_CENTER, 0,0) \r\n\tcall BlzFrameSetTexture( modeslight, \"framelightmode.blp\", 0, true )\r\n    call BlzFrameSetLevel( modeslight, -1 )\r\n    call BlzFrameSetVisible( modeslight, false )\r\n    \r\n    call TimerStart(CreateTimer(),0.04,true,function FrameModeLight)\r\n\r\n    set modesback = BlzCreateFrame(\"QuestButtonBaseTemplate\", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), 0, 0)\r\n    call BlzFrameSetAbsPoint(modesback, FRAMEPOINT_CENTER, 0.4, 0.35)\r\n    call BlzFrameSetSize(modesback, x*0.57, y*0.32)\r\n    call BlzFrameSetVisible( modesback, false )\r\n    call BlzFrameSetLevel( modesback, -1 )\r\n    \r\n    //=========Difficulty=========\r\n    set framebase = BlzCreateFrame(\"QuestButtonBackdropTemplate\", modesback, 0, 0)\r\n    call BlzFrameSetPoint(framebase, FRAMEPOINT_TOPLEFT, modesback, FRAMEPOINT_TOPLEFT, 0.005*x,-0.005*y) \r\n    call BlzFrameSetSize(framebase, 0.25*x, 0.1*y)\r\n    \r\n    set frame = BlzCreateFrameByType(\"TEXT\", \"\", modesback, \"StandartFrameTemplate\", 0)\r\n\tcall BlzFrameSetSize( frame, 0.06*x, 0.02*y )\r\n\tcall BlzFrameSetPoint(frame, FRAMEPOINT_TOP, framebase, FRAMEPOINT_TOP, 0,-0.01*y) \r\n\tcall BlzFrameSetText( frame, \"Difficulty\" )\r\n    \r\n    set modesdificon = BlzCreateFrameByType(\"BACKDROP\", \"\", modesback, \"StandartFrameTemplate\", 0)\r\n\tcall BlzFrameSetSize( modesdificon, 0.04*x, 0.04*y )\r\n\tcall BlzFrameSetPoint(modesdificon, FRAMEPOINT_TOPLEFT, framebase, FRAMEPOINT_TOPLEFT, 0.035*x,-0.02*y) //0 \r\n\tcall BlzFrameSetTexture( modesdificon, BlzGetAbilityIcon( udg_DB_ModesFrame_Difficulty[0]), 0, true )\r\n\r\n    set frame = BlzCreateFrame(\"ScriptDialogButton\", modesback, 0,0) \r\n\tcall BlzFrameSetSize(frame, 0.03,0.03)\r\n\tcall BlzFrameSetPoint(frame, FRAMEPOINT_TOPLEFT, framebase, FRAMEPOINT_TOPLEFT, 0.02*x,-0.06*y) //-0.02 \r\n\tcall BlzFrameSetText(frame, \"<\")\r\n\r\n    set trig = CreateTrigger()\r\n\tcall BlzTriggerRegisterFrameEvent(trig, frame, FRAMEEVENT_CONTROL_CLICK)\r\n\tcall TriggerAddAction(trig, function DifficultyLess)\r\n    \r\n    set frame = BlzCreateFrame(\"ScriptDialogButton\", modesback, 0,0) \r\n\tcall BlzFrameSetSize(frame, 0.03,0.03)\r\n\tcall BlzFrameSetPoint(frame, FRAMEPOINT_TOPLEFT, framebase, FRAMEPOINT_TOPLEFT, 0.06*x,-0.06*y) //-0.02 \r\n\tcall BlzFrameSetText(frame, \">\")\r\n\r\n    set trig = CreateTrigger()\r\n\tcall BlzTriggerRegisterFrameEvent(trig, frame, FRAMEEVENT_CONTROL_CLICK)\r\n\tcall TriggerAddAction(trig, function DifficultyMore)\r\n    \r\n    set modesdiftool = BlzCreateFrameByType(\"TEXT\", \"\", modesback, \"StandartFrameTemplate\", 0)\r\n\tcall BlzFrameSetSize( modesdiftool, 0.14*x, 0.07*y )\r\n\tcall BlzFrameSetPoint(modesdiftool, FRAMEPOINT_TOP, framebase, FRAMEPOINT_TOP, 0.04*x,-0.02*y)\r\n    call BlzFrameSetText( modesdiftool, BlzGetAbilityExtendedTooltip(udg_DB_ModesFrame_Difficulty[0], 0) )\r\n    \r\n    //=========Extra=========\r\n    set framebase = BlzCreateFrame(\"QuestButtonBackdropTemplate\", modesback, 0, 0)\r\n    call BlzFrameSetPoint(framebase, FRAMEPOINT_TOPLEFT, modesback, FRAMEPOINT_TOPLEFT, 0.005*x,-0.1*y) \r\n    call BlzFrameSetSize(framebase, 0.25*x, 0.1*y)\r\n    \r\n    set frame = BlzCreateFrameByType(\"TEXT\", \"\", modesback, \"StandartFrameTemplate\", 0)\r\n\tcall BlzFrameSetSize( frame, 0.04*x, 0.02*y )\r\n\tcall BlzFrameSetPoint(frame, FRAMEPOINT_TOP, framebase, FRAMEPOINT_TOP, 0,-0.01*y) \r\n\tcall BlzFrameSetText( frame, \"Extra\" )\r\n    \r\n    set modeshostname = BlzCreateFrameByType(\"TEXT\", \"\", framebase, \"StandartFrameTemplate\", 0)\r\n\tcall BlzFrameSetSize( modeshostname, 0.1*x, 0.01*y )\r\n\tcall BlzFrameSetPoint(modeshostname, FRAMEPOINT_BOTTOMLEFT, framebase, FRAMEPOINT_BOTTOMLEFT, 0.01*x,0.01*y)  \r\n\tcall BlzFrameSetText( modeshostname, \"Host: \" + udg_Player_Color[GetPlayerId( udg_Host ) + 1] + GetPlayerName(udg_Host) + \"|r\" )\r\n    \r\n    set cyclA = 1\r\n    loop\r\n        exitwhen cyclA > udg_DB_ModesFrame_AbilityNum\r\n        set modesextraicon[cyclA] = BlzCreateFrameByType(\"BACKDROP\", \"\", modesback, \"StandartFrameTemplate\", 0)\r\n        call BlzFrameSetSize( modesextraicon[cyclA], 0.04*x, 0.04*y )\r\n        call BlzFrameSetPoint(modesextraicon[cyclA], FRAMEPOINT_TOPLEFT, framebase, FRAMEPOINT_TOPLEFT, (-0.03+(cyclA*0.045))*x,-0.03*y)\r\n        \r\n        call BlzFrameSetTexture( modesextraicon[cyclA], BlzGetAbilityIcon( udg_DB_ModesFrame_Ability[cyclA]), 0, true )\r\n        \r\n        set modesextrabut[cyclA] = BlzCreateFrameByType(\"GLUEBUTTON\", \"\", modesback, \"ScoreScreenTabButtonTemplate\", 0)\r\n        call BlzFrameSetSize( modesextrabut[cyclA], 0.04*x, 0.04*y )\r\n        call BlzFrameSetPoint(modesextrabut[cyclA], FRAMEPOINT_CENTER, modesextraicon[cyclA], FRAMEPOINT_CENTER, 0,0)\r\n        \r\n        set trig = CreateTrigger()\r\n    \tcall BlzTriggerRegisterFrameEvent(trig, modesextrabut[cyclA], FRAMEEVENT_CONTROL_CLICK)\r\n    \tcall TriggerAddAction(trig, function ExtraModeUse)\r\n        \r\n        call SetStableTool( modesextrabut[cyclA], BlzGetAbilityTooltip(udg_DB_ModesFrame_Ability[cyclA], 0), BlzGetAbilityExtendedTooltip(udg_DB_ModesFrame_Ability[cyclA], 0) )\r\n        set cyclA = cyclA + 1\r\n    endloop\r\n    \r\n    //=========Mods=========\r\n    set modebase = BlzCreateFrame(\"QuestButtonBackdropTemplate\", modesback, 0, 0)\r\n    call BlzFrameSetPoint(modebase, FRAMEPOINT_TOPLEFT, modesback, FRAMEPOINT_TOPLEFT, 0.005*x,-0.195*y) \r\n    call BlzFrameSetSize(modebase, 0.25*x, 0.12*y)\r\n    \r\n    set frame = BlzCreateFrameByType(\"TEXT\", \"\", modebase, \"StandartFrameTemplate\", 0)\r\n\tcall BlzFrameSetSize( frame, 0.04*x, 0.02*y )\r\n\tcall BlzFrameSetPoint(frame, FRAMEPOINT_TOP, modebase, FRAMEPOINT_TOP, 0,-0.01*y) \r\n\tcall BlzFrameSetText( frame, \"Mods\" )\r\n    \r\n    set cyclA = 1\r\n    //set i = 0\r\n    loop\r\n        exitwhen cyclA > udg_DB_ModesFrame_ModeLR\r\n        set cyclB = 1\r\n        loop\r\n            exitwhen cyclB > udg_DB_ModesFrame_ModeUD\r\n            //set i = i + 1\r\n            if DB_ModesFrame_Mode[cyclA][cyclB] != 0 then\r\n                set modesmodeicon[cyclA][cyclB]  = BlzCreateFrameByType(\"BACKDROP\", \"\", modebase, \"StandartFrameTemplate\", 0)\r\n                call BlzFrameSetSize( modesmodeicon[cyclA][cyclB], 0.04*x, 0.04*y )\r\n                call BlzFrameSetPoint(modesmodeicon[cyclA][cyclB], FRAMEPOINT_TOP, modebase, FRAMEPOINT_TOP, (-0.11+(cyclA*0.045))*x,(0.02+(-0.045*cyclB))*y)\r\n                call BlzFrameSetTexture( modesmodeicon[cyclA][cyclB], BlzGetAbilityIcon( DB_ModesFrame_Mode[cyclA][cyclB]), 0, true )\r\n                \r\n                //call DisplayTimedTextToForce( GetPlayersAll(), 5.00, \"==================\" )\r\n                //call DisplayTimedTextToForce( GetPlayersAll(), 5.00, R2S((-0.09+(cyclA*0.045))*x) )\r\n                //call DisplayTimedTextToForce( GetPlayersAll(), 5.00, R2S((0.02+(-0.045*cyclB))*y) )\r\n                \r\n                set modesmodebut[cyclA][cyclB] = BlzCreateFrameByType(\"GLUEBUTTON\", \"\", modebase, \"ScoreScreenTabButtonTemplate\", 0)\r\n                call BlzFrameSetSize( modesmodebut[cyclA][cyclB], 0.04*x, 0.04*y )\r\n                call BlzFrameSetPoint(modesmodebut[cyclA][cyclB], FRAMEPOINT_CENTER, modesmodeicon[cyclA][cyclB], FRAMEPOINT_CENTER, 0,0)\r\n                \r\n                set trig = CreateTrigger()\r\n                call BlzTriggerRegisterFrameEvent(trig, modesmodebut[cyclA][cyclB], FRAMEEVENT_CONTROL_CLICK)\r\n                call TriggerAddAction(trig, function ModsModeUse)\r\n                \r\n                set modesDescription[cyclA][cyclB] = SetStableTool( modesmodebut[cyclA][cyclB], BlzGetAbilityTooltip(DB_ModesFrame_Mode[cyclA][cyclB], 0), BlzGetAbilityExtendedTooltip(DB_ModesFrame_Mode[cyclA][cyclB], 0) )\r\n            endif\r\n            set cyclB = cyclB + 1\r\n        endloop\r\n        set cyclA = cyclA + 1\r\n    endloop  \r\n    \r\n    //=========Rotation=========\r\n    set rotbase = BlzCreateFrame(\"QuestButtonBackdropTemplate\", modesback, 0, 0)\r\n    call BlzFrameSetPoint(rotbase, FRAMEPOINT_TOPLEFT, modesback, FRAMEPOINT_TOPLEFT, 0.255*x,-0.005*y) \r\n    call BlzFrameSetSize(rotbase, 0.305*x, 0.31*y)\r\n    \r\n    set frame = BlzCreateFrameByType(\"TEXT\", \"\", rotbase, \"StandartFrameTemplate\", 0)\r\n\tcall BlzFrameSetSize( frame, 0.04*x, 0.02*y )\r\n\tcall BlzFrameSetPoint(frame, FRAMEPOINT_TOP, rotbase, FRAMEPOINT_TOP, 0,-0.01*y) \r\n\tcall BlzFrameSetText( frame, \"Rotation\" )\r\n    \r\n    set cyclA = 1\r\n    loop\r\n        exitwhen cyclA > udg_DB_ModesFrame_RotationLR\r\n        set cyclB = 1\r\n        loop\r\n            exitwhen cyclB > udg_DB_ModesFrame_RotationUD\r\n            if DB_ModesFrame_Rotation[cyclA][cyclB] != 0 then\r\n                set modesroticon[cyclA][cyclB] = BlzCreateFrameByType(\"BACKDROP\", \"\", rotbase, \"StandartFrameTemplate\", 0)\r\n                call BlzFrameSetSize( modesroticon[cyclA][cyclB], 0.04*x, 0.04*y )\r\n                call BlzFrameSetPoint(modesroticon[cyclA][cyclB], FRAMEPOINT_TOP, rotbase, FRAMEPOINT_TOP, (-0.14+(cyclA*0.045))*x,(0.02+(-0.045*cyclB))*y)\r\n                call BlzFrameSetTexture( modesroticon[cyclA][cyclB], BlzGetAbilityIcon( DB_ModesFrame_Rotation[cyclA][cyclB]), 0, true )\r\n                \r\n                set modesrotebut[cyclA][cyclB] = BlzCreateFrameByType(\"GLUEBUTTON\", \"\", rotbase, \"ScoreScreenTabButtonTemplate\", 0)\r\n                call BlzFrameSetSize( modesrotebut[cyclA][cyclB], 0.04*x, 0.04*y )\r\n                call BlzFrameSetPoint(modesrotebut[cyclA][cyclB], FRAMEPOINT_CENTER, modesroticon[cyclA][cyclB], FRAMEPOINT_CENTER, 0,0)\r\n                \r\n                set trig = CreateTrigger()\r\n                call BlzTriggerRegisterFrameEvent(trig, modesrotebut[cyclA][cyclB], FRAMEEVENT_CONTROL_CLICK)\r\n                call TriggerAddAction(trig, function RotationModeUse)\r\n                \r\n                call SetStableTool( modesrotebut[cyclA][cyclB], BlzGetAbilityTooltip(DB_ModesFrame_Rotation[cyclA][cyclB], 0), BlzGetAbilityExtendedTooltip(DB_ModesFrame_Rotation[cyclA][cyclB], 0) )\r\n            endif\r\n            set cyclB = cyclB + 1\r\n        endloop\r\n        set cyclA = cyclA + 1\r\n    endloop  \r\n    \r\n    set trig = null\r\n    set frame = null\r\n    set framebase = null\r\nendfunction\r\n\r\n//===========================================================================\r\nfunction InitTrig_ModesFrame takes nothing returns nothing\r\n    set gg_trg_ModesFrame = CreateTrigger(  )\r\n    call TriggerRegisterTimerExpireEvent( gg_trg_ModesFrame, udg_StartTimer )\r\n    call TriggerAddAction( gg_trg_ModesFrame, function Trig_ModesFrame_Actions )\r\nendfunction",
  "Events": [],
  "LocalVariables": [],
  "Conditions": [],
  "Actions": []
}