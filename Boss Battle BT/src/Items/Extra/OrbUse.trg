{
  "Id": 50332840,
  "Comment": "",
  "IsScript": true,
  "RunOnMapInit": false,
  "Script": "scope OrbMerge initializer init\r\n\t\r\n\t/*private function Orb_Logic takes item t returns boolean\r\n\t    local integer i = 1\r\n\t    local integer iEnd = udg_Database_NumberItems[8]\r\n\t\tlocal integer itemType = GetItemTypeId(t)\r\n\t    \r\n\t    loop\r\n\t        exitwhen i > iEnd\r\n\t        if itemType == udg_DB_Orb[i] then\r\n\t            return true\r\n\t        endif\r\n\t        set i = i + 1\r\n\t    endloop\r\n\t    return false\r\n\tendfunction*/\r\n\t\r\n\tprivate function condition takes nothing returns boolean\r\n\t    if udg_logic[36] then\r\n\t        return false\r\n\t    endif\r\n\t    if TagSystem_CheckTagItem(GetManipulatedItem(), TAG_UNMERGED_ORB) /*Orb_Logic(GetManipulatedItem())*/ == false then\r\n\t        return false\r\n\t    endif\r\n\t    return true\r\n\tendfunction\r\n\t\r\n\tprivate function CheckAmount takes unit n, integer itemType, integer itemTypeCheck returns nothing\r\n\t\tlocal integer amount = inv(n, itemType)\r\n\t\tif itemType == itemTypeCheck then\r\n\t\t\tset amount = amount + 1\r\n\t\tendif\r\n\t\treturn amount\r\n\tendfunction\r\n\t\r\n\tpublic function Merge takes unit n, integer itemType returns nothing\r\n\t    local integer add = 0\r\n\t    \r\n\t    local integer arcane = CheckAmount(n,'I08Y', itemType)\r\n\t    local integer fire = CheckAmount(n,'I08Z', itemType)\r\n\t    local integer frost = CheckAmount(n,'I090', itemType)\r\n\t    local integer earth = CheckAmount(n,'I0EP', itemType)\r\n\t    local integer nature = CheckAmount(n,'I0F0', itemType)\r\n\t    local integer light = CheckAmount(n,'I0FJ', itemType)\r\n\t    local integer shadow = CheckAmount(n,'I0FU', itemType)\r\n\t    \r\n\t    if arcane > 1 then//arcane\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Y'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Y'))\r\n\t        set add = 'I0DK'\r\n\t    elseif inv(n,'I08Z') > 1 then//fire\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Z'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Z'))\r\n\t        set add = 'I091'\r\n\t    elseif inv(n,'I090') > 1 then//frost\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I090'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I090'))\r\n\t        set add = 'I0DF'\r\n\t    elseif inv(n,'I0EP') > 1 then//earth\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0EP'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0EP'))\r\n\t        set add = 'I0EQ'\r\n\t    elseif inv(n,'I0F0') > 1 then//nature\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0F0'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0F0'))\r\n\t        set add = 'I0F1'\r\n\t    elseif inv(n,'I0FJ') > 1 then//light\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FJ'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FJ'))\r\n\t        set add = 'I0FK'\r\n\t    elseif inv(n,'I0FU') > 1 then//shadow\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FU'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FU'))\r\n\t        set add = 'I0FV'\r\n\t    elseif arcane > 0 and inv(n,'I08Z') > 0 then//arcane+fire\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Y'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Z'))\r\n\t        set add = 'I0AN'\r\n\t    elseif arcane > 0 and inv(n,'I090') > 0 then//arcane+frost\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Y'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I090'))\r\n\t        set add = 'I0DJ'\r\n\t    elseif inv(n,'I090') > 0 and inv(n,'I08Z') > 0 then//frost+fire\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Z'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I090'))\r\n\t        set add = 'I0AH'\r\n\t    elseif inv(n,'I0EP') > 0 and inv(n,'I08Z') > 0 then//earth+fire\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0EP'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Z'))\r\n\t        set add = 'I0ER'\r\n\t    elseif inv(n,'I0EP') > 0 and inv(n,'I090') > 0 then//earth+frost\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0EP'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I090'))\r\n\t        set add = 'I0ES'\r\n\t    elseif inv(n,'I0EP') > 0 and inv(n,'I08Y') > 0 then//earth+arcane\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0EP'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Y'))\r\n\t        set add = 'I0ET'\r\n\t    elseif inv(n,'I0F0') > 0 and inv(n,'I08Z') > 0 then//nature+fire\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0F0'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Z'))\r\n\t        set add = 'I0F4'\r\n\t    elseif inv(n,'I0F0') > 0 and inv(n,'I0EP') > 0 then//earth+nature\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0F0'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0EP'))\r\n\t        set add = 'I0F2'\r\n\t    elseif inv(n,'I0F0') > 0 and inv(n,'I090') > 0 then//nature+frost\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0F0'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I090'))\r\n\t        set add = 'I0F5'\r\n\t    elseif inv(n,'I0F0') > 0 and inv(n,'I08Y') > 0 then//nature+arcane\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0F0'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Y'))\r\n\t        set add = 'I0F3'\r\n\t    elseif inv(n,'I0FJ') > 0 and inv(n,'I090') > 0 then//light+frost\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FJ'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I090'))\r\n\t        set add = 'I0FO'\r\n\t    elseif inv(n,'I0FJ') > 0 and arcane > 0 then//light+arcane\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FJ'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Y'))\r\n\t        set add = 'I0FM'\r\n\t    elseif inv(n,'I0FJ') > 0 and inv(n,'I08Z') > 0 then//light+fire\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FJ'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Z'))\r\n\t        set add = 'I0FN'\r\n\t    elseif inv(n,'I0FJ') > 0 and inv(n,'I0EP') > 0 then//earth+light\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FJ'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0EP'))\r\n\t        set add = 'I0FL'\r\n\t    elseif inv(n,'I0F0') > 0 and inv(n,'I0FJ') > 0 then//nature+light\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0F0'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FJ'))\r\n\t        set add = 'I0FP'\r\n\t    elseif inv(n,'I0F0') > 0 and inv(n,'I0FU') > 0 then//nature+dark\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0F0'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FU'))\r\n\t        set add = 'I0FZ'\r\n\t    elseif inv(n,'I0FU') > 0 and inv(n,'I090') > 0 then//dark+frost\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FU'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I090'))\r\n\t        set add = 'I0FY'\r\n\t    elseif inv(n,'I0FU') > 0 and arcane > 0 then//dark+arcane\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FU'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Y'))\r\n\t        set add = 'I0FX'\r\n\t    elseif inv(n,'I0FU') > 0 and inv(n,'I08Z') > 0 then//dark+fire\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FU'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I08Z'))\r\n\t        set add = 'I0FW'\r\n\t    elseif inv(n,'I0FU') > 0 and inv(n,'I0EP') > 0 then//earth+dark\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FU'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0EP'))\r\n\t        set add = 'I0G1'\r\n\t    elseif inv(n,'I0FU') > 0 and inv(n,'I0FJ') > 0 then//dark+light\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FU'))\r\n\t        call RemoveItem(GetItemOfTypeFromUnitBJ(n, 'I0FJ'))\r\n\t        set add = 'I0G0'\r\n\t    endif\r\n\t    if add != 0 then\r\n\t        call DestroyEffect( AddSpecialEffect( \"Abilities\\\\Spells\\\\Human\\\\Polymorph\\\\PolyMorphDoneGround.mdl\", GetUnitX( n ), GetUnitY( n ) ) )\r\n\t        call UnitAddItem(n, CreateItem( add, GetUnitX( n ), GetUnitY(n)) )\r\n\t    endif\r\n\t    \r\n\t    set n = null\r\n\tendfunction\r\n\t\r\n\tprivate function action takes nothing returns nothing\r\n\t    call Merge(GetManipulatingUnit(), 0)\r\n\tendfunction\r\n\t\r\n\t//===========================================================================\r\n\tprivate function init takes nothing returns nothing\r\n\t    set gg_trg_OrbUse = CreateTrigger(  )\r\n\t    call TriggerRegisterAnyUnitEventBJ( gg_trg_OrbUse, EVENT_PLAYER_UNIT_PICKUP_ITEM )\r\n\t    call TriggerAddCondition( gg_trg_OrbUse, Condition( function condition ) )\r\n\t    call TriggerAddAction( gg_trg_OrbUse, function Trig_OrbUse_Actions )\r\n\tendfunction\r\n\t\r\nendscope",
  "Events": [],
  "LocalVariables": [],
  "Conditions": [],
  "Actions": []
}